# Fragment for POST /api/v1/apikey/
"/apikey/":
  post:
    summary: "INTERNAL: Create API Key"
    description: "INTERNAL: Creates a new API key and secret. The plaintext secret is only returned on creation."
    operationId: "internalApikeyCreate"
    tags: ["API Keys", "InternalAPI"]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../../schemas/modules/ApiKeySchemas.yaml#/components/schemas/ApiKeyRequestBody"
    responses:
      '200': # Assuming 200 for successful creation based on controller
        description: "API Key created successfully. The apiSecret returned is the only time the plaintext secret is available."
        content:
          application/json:
            schema:
              $ref: "../../schemas/modules/ApiKeySchemas.yaml#/components/schemas/ApiKey"
      '412':
        description: "Precondition Failed (e.g., missing keyName)."
        content:
          application/json:
            schema:
              $ref: '../../schemas/shared/ErrorResponse.yaml#/components/schemas/ErrorResponse'
      '500':
        description: "Internal Server Error."
        content:
          application/json:
            schema:
              $ref: '../../schemas/shared/ErrorResponse.yaml#/components/schemas/ErrorResponse'
    security:
      - ApiKeyAuth: []
