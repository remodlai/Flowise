"/credentials/": # This is for the GET / route
  get:
    summary: "INTERNAL: Get All Credentials (or by Type)"
    description: |
      INTERNAL: Retrieves all stored credential instances.
      Can be filtered by one or more `credentialName` (type of credential) query parameters.
      NOTE: `encryptedData` is ONLY returned if filtered by `credentialName`; otherwise, it's omitted.
    operationId: "internalCredentialsGetAll"
    tags: ["Credentials", "InternalAPI"]
    parameters:
      - name: credentialName
        in: query
        description: "Filter by specific credential type name(s). Can be repeated for multiple (e.g., ?credentialName=type1&credentialName=type2)."
        required: false
        schema:
          oneOf: # Express query params can be string or array of strings if repeated
            - type: string
            - type: array
              items:
                type: string
        example: "openAIApi"
    responses:
      '200':
        description: "Successfully retrieved credentials."
        content:
          application/json:
            schema:
              type: array
              items:
                oneOf:
                  - type: object
                    description: "Credential with encryptedData (when filtered by credentialName)"
                    properties:
                      id:
                        type: string
                        format: uuid
                      name:
                        type: string
                      credentialName:
                        type: string
                      encryptedData:
                        type: string
                        description: "Encrypted credential data (only present when filtered by credentialName)"
                      createdDate:
                        type: string
                        format: date-time
                      updatedDate:
                        type: string
                        format: date-time
                    required:
                      - id
                      - name
                      - credentialName
                      - encryptedData
                      - createdDate
                      - updatedDate
                  - type: object
                    description: "Credential without encryptedData (when not filtered)"
                    properties:
                      id:
                        type: string
                        format: uuid
                      name:
                        type: string
                      credentialName:
                        type: string
                      createdDate:
                        type: string
                        format: date-time
                      updatedDate:
                        type: string
                        format: date-time
                    required:
                      - id
                      - name
                      - credentialName
                      - createdDate
                      - updatedDate
      '500':
        description: "Internal Server Error."
        content:
          application/json:
            schema:
              $ref: "../../schemas/shared/ErrorResponse.yaml#/components/schemas/ErrorResponse"
    # security:
    #   - InternalApiKeyAuth: []