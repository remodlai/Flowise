"/credentials/": # This is for the GET / route
  get:
    summary: "INTERNAL: Get All Credentials (or by Type)"
    description: |
      INTERNAL: Retrieves all stored credential instances.
      Can be filtered by one or more `credentialName` (type of credential) query parameters.
      NOTE: `encryptedData` is ONLY returned if filtered by `credentialName`; otherwise, it's omitted.
    operationId: "internalCredentialsGetAll"
    tags: ["Credentials", "InternalAPI"]
    parameters:
      - name: credentialName
        in: query
        description: "Filter by specific credential type name(s). Can be repeated for multiple (e.g., ?credentialName=type1&credentialName=type2)."
        required: false
        schema:
          oneOf: # Express query params can be string or array of strings if repeated
            - type: string
            - type: array
              items:
                type: string
        example: "openAIApi"
    responses:
      '200':
        description: "Successfully retrieved credentials."
        content:
          application/json:
            schema:
              type: array
              items:
                # $ref: "#/components/schemas/CredentialWithOrWithoutEncryptedData"
                # This schema needs to reflect that encryptedData is conditional
                type: object
                properties:
                  id: { type: string, format: uuid }
                  name: { type: string }
                  credentialName: { type: string }
                  encryptedData: { type: string, nullable: true, description: "Present only if filtered by credentialName" }
                  createdDate: { type: string, format: date-time }
                  updatedDate: { type: string, format: date-time }
      '500':
        description: "Internal Server Error."
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ErrorResponse"
    # security:
    #   - InternalApiKeyAuth: []
