# Fragment for POST /api/v1/agentflowv2-generator/generate
"/agentflowv2-generator/generate":
  post:
    summary: "INTERNAL: Generate AgentFlow V2 Config"
    description: |
      INTERNAL: Generates a Remodl Core AgentFlow V2 graph structure (nodes and edges) 
      based on a user's natural language question/request and a selected chat model configuration.
      It utilizes available Agent Flow nodes, tools, and marketplace templates to construct the flow.
    operationId: "internalAgentflowv2GeneratorGenerate"
    tags: ["AgentFlowV2-Generator", "InternalAPI"]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/AgentflowV2GenerateRequest" # To be defined in main spec
    responses:
      '200':
        description: "AgentFlow V2 configuration generated successfully, or a parsing error object if validation failed."
        content:
          application/json:
            schema:
              oneOf: 
                - $ref: "#/components/schemas/AgentflowV2GenerateResponse" # To be defined
                - type: object
                  properties:
                    error: 
                      type: string
                      description: Description of the parsing/validation error.
                    rawResponse:
                      type: object
                      description: The raw, unvalidated response from the generation process.
                      additionalProperties: true 
      '400':
        description: "Bad Request (e.g., missing `question` or `selectedChatModel` in request body)."
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
      '500':
        description: "Internal Server Error during generation."
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
    # security:
    #   - InternalApiKeyAuth: [] # To be confirmed
